const nativeScrollTo=window.scrollTo.bind(window);window.scrollTo=function(e,t){if("string"==typeof e){const t=document.querySelector(e);return void(t&&t.scrollIntoView({behavior:"smooth"}))}nativeScrollTo(e,t)},document.addEventListener("DOMContentLoaded",()=>{document.body.classList.add("loaded");const e=document.querySelector(".hero__overlay");e&&(e.style.visibility="visible",e.classList.add("show"));const t=document.getElementById("current-year");t&&(t.textContent=(new Date).getFullYear());const o=document.getElementById("logo-link");o&&o.addEventListener("click",e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"}),history.pushState(null,null,"/")});const n=document.querySelector(".site-header");if(n){const e=()=>{const e=n.offsetHeight;n.classList.toggle("header--scrolled",window.scrollY>e)};window.addEventListener("scroll",e),e()}initVideoPlaceholders();const a=document.querySelector(".testimonials__carousel");if(a&&window.Swiper){const e=new Swiper(a,{loop:!0,slidesPerView:1,spaceBetween:20,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0},autoplay:{delay:6e3,disableOnInteraction:!1},breakpoints:{768:{slidesPerView:2},1024:{slidesPerView:3}},a11y:!0}),t=()=>e.autoplay.stop(),o=()=>e.autoplay.start();a.addEventListener("mouseenter",t),a.addEventListener("mouseleave",o),a.addEventListener("focusin",t),a.addEventListener("focusout",o)}});const toggleButton=document.getElementById("theme-toggle");if(toggleButton){const e=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",e),toggleButton.textContent="dark"===e?"â˜€ï¸":"ðŸŒ™",toggleButton.addEventListener("click",()=>{"dark"===document.documentElement.getAttribute("data-theme")?(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light"),toggleButton.textContent="ðŸŒ™"):(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark"),toggleButton.textContent="â˜€ï¸")})}const navToggle=document.querySelector(".nav-toggle"),navList=document.querySelector(".nav__list"),navLinks=document.querySelectorAll(".nav__link");navToggle&&navList&&(navToggle.addEventListener("click",()=>{const e=navList.classList.toggle("active");navToggle.classList.toggle("active",e),navToggle.textContent=e?"âœ–ï¸":"â˜°",navToggle.setAttribute("aria-expanded",e)}),navToggle.setAttribute("aria-expanded","false"),navLinks.forEach(e=>{e.addEventListener("click",()=>{navList.classList.contains("active")&&(navList.classList.remove("active"),navToggle.classList.remove("active"),navToggle.textContent="â˜°",navToggle.setAttribute("aria-expanded",!1))})}));const toggles=document.querySelectorAll(".about__toggle");if(toggles.forEach(e=>{e.addEventListener("click",()=>{const t="true"===e.getAttribute("aria-expanded");if(toggles.forEach(e=>e.setAttribute("aria-expanded","false")),document.querySelectorAll(".about__panel").forEach(e=>e.style.maxHeight=null),!t){e.setAttribute("aria-expanded","true");const t=document.getElementById(e.getAttribute("aria-controls"));t&&(t.style.maxHeight=t.scrollHeight+"px")}})}),document.querySelectorAll(".testimonials__toggle").forEach(e=>{const t=e.closest(".testimonials__item"),o=t.querySelector(".testimonials__full");e.addEventListener("click",()=>{const n=t.classList.toggle("expanded");e.setAttribute("aria-expanded",n),e.textContent=n?"Show Less":"Read More",o&&(o.hidden=!n,n&&o.focus())})}),navLinks.length>0){const e=Array.from(navLinks).map(e=>document.querySelector(e.hash)).filter(Boolean),t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target.id;navLinks.forEach(e=>{const o=e.hash===`#${t}`;e.classList.toggle("nav__link--active",o),o?e.setAttribute("aria-current","page"):e.removeAttribute("aria-current")})}})},{threshold:.5});e.forEach(e=>t.observe(e))}function initVideoPlaceholders(){document.querySelectorAll(".video-wrapper").forEach(e=>{const t=e.querySelector("img"),o=e.querySelector(".play-button");if(!t||!o)return;const n=e.dataset.title;if(n){const t=document.createElement("div");t.className="video-title",t.textContent=n,e.appendChild(t)}const a=()=>{const o=t.naturalWidth/t.naturalHeight;o&&e.style.setProperty("--ratio",o)};t.complete?a():t.addEventListener("load",a),o.addEventListener("click",t=>{t.preventDefault(),openModal(e)}),e.addEventListener("mouseenter",()=>showPreview(e)),e.addEventListener("mouseleave",()=>hidePreview(e))})}function openModal(e){hidePreview(e);const t=document.getElementById("video-modal");if(!t)return;const o=t.querySelector(".modal-video-container");if(!o)return;const n=`${e.dataset.src}?autoplay=1`,a=parseFloat(e.style.getPropertyValue("--ratio"))||16/9,i=.9*window.innerWidth,l=.9*window.innerHeight;let r=i,s=r/a;s>l&&(s=l,r=s*a),o.style.width=`${r}px`,o.style.height=`${s}px`,o.style.setProperty("--modal-ratio",a),o.innerHTML=`<iframe src="${n}" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen tabindex="0" title="Video player" loading="lazy"></iframe>`,t.hidden=!1,document.body.style.overflow="hidden";const d=o.querySelector("iframe");d&&d.focus();const c=()=>{const e=.9*window.innerWidth,t=.9*window.innerHeight;let n=e,i=n/a;i>t&&(i=t,n=i*a),o.style.width=`${n}px`,o.style.height=`${i}px`};window.addEventListener("resize",c),o._resizeHandler=c}function closeModal(){const e=document.getElementById("video-modal");if(!e)return;const t=e.querySelector(".modal-video-container");if(!t)return;e.hidden=!0,t.innerHTML="",t.style.width="",t.style.height="";const o=t._resizeHandler;o&&(window.removeEventListener("resize",o),delete t._resizeHandler),document.body.style.overflow=""}const modalCloseBtn=document.querySelector("#video-modal .modal-close");modalCloseBtn&&modalCloseBtn.addEventListener("click",closeModal);const modalBackdrop=document.getElementById("video-modal");modalBackdrop&&modalBackdrop.addEventListener("click",function(e){e.target===this&&closeModal()});const modalContent=document.querySelector("#video-modal .modal-content");function getPreviewSrc(e){if(!e)return"";if(e.includes("youtube")){const t=e.match(/embed\/(.*?)(\?|$)/),o=t?t[1]:"";return o?`https://www.youtube.com/embed/${o}?autoplay=1&mute=1&controls=0&loop=1&start=0&end=2&playlist=${o}`:""}return e.includes("vimeo")?`${e}?autoplay=1&muted=1&loop=1#t=0,2`:""}function showPreview(e){const t=getPreviewSrc(e.dataset.src);if(!t)return;let o=e.querySelector(".preview-iframe");o||(o=document.createElement("iframe"),o.className="preview-iframe",o.setAttribute("aria-hidden","true"),o.setAttribute("tabindex","-1"),o.allow="autoplay; muted",o.loading="lazy",e.appendChild(o)),o.src=t}function hidePreview(e){const t=e.querySelector(".preview-iframe");t&&t.remove()}modalContent&&modalContent.addEventListener("click",e=>e.stopPropagation()),document.addEventListener("keydown",e=>{"Escape"===e.key&&closeModal()});